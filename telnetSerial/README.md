taken from https://github.com/esp8266/Arduino/issues/1169
